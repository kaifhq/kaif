var d=Symbol();function c(i,a,...l){return i===d?l:typeof i=="function"?i({...a,children:l}):{...a,elem:i,children:l}}var x=(i,a)=>{let l={$el:i,elem:i.nodeName.toLowerCase()},f,s=()=>{f=y(l,a(),i),m(l),l=f},m=n=>{(n.children??[]).map(m),n.repaint||(n=n.$el.remove())},y=(n,e,u)=>{Array.isArray(e)&&(e={children:e}),(typeof e=="string"||typeof e=="number")&&(e={innerText:e.toString()}),e.elem=e.elem||"span",!n||(f=n.elem!==e.elem)?(n&&f&&m(n),e.$el=document.createElement(e.elem),u.append(e.$el)):(n.repaint=!0,e.$el=n.$el,e.cleanup=n.cleanup);let{$el:o,elem:E,children:g,cleanup:h,...r}=e;if(h)for(let t in h)o.removeEventListener(t.substring(2),e.cleanup[t]);e.cleanup={};for(let t in r)typeof(f=r[t])>"u"||(t.indexOf("on")!=0?typeof f=="object"?Object.assign(o[t],f):o[t]=f:o.addEventListener(t.substring(2),e.cleanup[t]=p=>{let b=r[t](p);b&&typeof b.then=="function"||s()}));return g?{...e,children:g.map((t,p)=>y(n&&n.children&&n.children[p],t,o))}:e};return s(),s},j={init:x,h:c,Fragment:d};export{j as default};
