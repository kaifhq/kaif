var x="function",r="children",c="clean",p="",K=(f,a,...l)=>typeof f==x?f({[r]:l,...a}):{[r]:l,...a,elem:f},L=(f,a)=>{let l={$:f,elem:f.nodeName.toLowerCase()},o,g=d=>{for(let s=[d],i;i=s.shift();)i[r]&&(s=s.concat(i[r])),i.repaint||(i=i.$.remove())},m=()=>{let d=null;for(let s=[[l,a(),f]],i;i=s.shift();){let[n,e,b,$]=i;Array.isArray(e)&&(e={[r]:e,elem:p}),["string","number"].includes(typeof e)&&(e={innerText:e.toString()});let y=e.elem=e.elem||p;!n||(o=n.elem!=y)?(n&&o&&g(n),y==p?e.$=b:(e.$=document.createElement(y),b.append(e.$))):(n.repaint=!0,e.$=n.$,e[c]=n[c]);let{$:u,elem:j,[r]:w,[c]:E,...h}=e;for(let t in E||{})u.removeEventListener(t.substring(2),e[c][t]);e[c]={};for(let t in h)typeof(o=h[t])>"u"||(t.indexOf("on")!=0?typeof o=="object"?Object.assign(u[t],o):u[t]=o:u.addEventListener(t.substring(2),e[c][t]=v=>(o=h[t](v))&&typeof o.then==x||m()));w&&(w.map((t,v)=>s.push([n&&n[r]&&n[r][v],t,u,e])),e[r]=[]),$?$[r].push(e):d=e}g(l),l=d};return m(),m},k={init:L,h:K,Fragment:p};export{k as default};
