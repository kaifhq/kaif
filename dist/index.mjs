var x="function",r="children",c="clean",g="frag",K=(f,a,...s)=>typeof f==x?f({...a,[r]:s}):{...a,elem:f,[r]:s},L=(f,a)=>{let s={$:f,elem:f.nodeName.toLowerCase()},o,v=d=>{for(let l=[d],i;i=l.shift();)i[r]&&(l=l.concat(i[r])),i.repaint||(i=i.$.remove())},p=()=>{let d=null;for(let l=[[s,a(),f]],i;i=l.shift();){let[n,e,b,$]=i;Array.isArray(e)&&(e={[r]:e,elem:g}),["string","number"].includes(typeof e)&&(e={innerText:e.toString()});let m=e.elem=e.elem||"span";!n||(o=n.elem!=m)?(n&&o&&v(n),m==g?e.$=b:(e.$=document.createElement(m),b.append(e.$))):(n.repaint=!0,e.$=n.$,e[c]=n[c]);let{$:u,elem:j,[r]:w,[c]:E,...y}=e;for(let t in E||{})u.removeEventListener(t.substring(2),e[c][t]);e[c]={};for(let t in y)typeof(o=y[t])>"u"||(t.indexOf("on")!=0?typeof o=="object"?Object.assign(u[t],o):u[t]=o:u.addEventListener(t.substring(2),e[c][t]=h=>(o=y[t](h))&&typeof o.then==x||p()));w&&(w.map((t,h)=>l.push([n&&n[r]&&n[r][h],t,u,e])),e[r]=[]),$?$[r].push(e):d=e}v(s),s=d};return p(),p},k={init:L,h:K,Fragment:g};export{k as default};
