var p=Symbol();function h(i,a,...f){return i===p?f:typeof i=="function"?i({...a,children:f}):{...a,elem:i,children:f}}var x=(i,a)=>{let f={$el:i,elem:i.nodeName.toLowerCase()},l,s=()=>{l=y(f,a(),i),m(f),f=l},m=n=>{(n.children??[]).map(m),n.repaint||(n.$el.remove(),n=null)},y=(n,e,u)=>{Array.isArray(e)&&(e={children:e}),(typeof e=="string"||typeof e=="number")&&(e={innerText:e.toString()}),e.elem=e.elem||"span",!n||(l=n.elem!==e.elem)?(n&&l&&m(n),e.$el=document.createElement(e.elem),u.append(e.$el)):(n.repaint=!0,e.$el=n.$el,e.cleanup=n.cleanup);let{$el:o,elem:E,children:g,cleanup:b,...r}=e;if(b)for(let t in b)o.removeEventListener(t.substring(2),e.cleanup[t]);e.cleanup={};for(let t in r)typeof(l=r[t])>"u"||(t.indexOf("on")!=0?typeof l=="object"?Object.assign(o[t],l):o[t]=l:o.addEventListener(t.substring(2),e.cleanup[t]=d=>{r[t](d),s()}));return g?{...e,children:g.map((t,d)=>y(n&&n.children&&n.children[d],t,o))}:e};return s(),s},L={init:x,h,Fragment:p};export{L as default};
