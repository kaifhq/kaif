var p=Symbol();function b(i,o,...l){return i===p?l:typeof i=="function"?i({...o,children:l}):{...o,elem:i,children:l}}var x=(i,o)=>{let l={$el:i,elem:i.nodeName.toLowerCase()},f,m=()=>{f=y(l,o(),i),s(l),l=f},s=n=>{(n.children??[]).map(s),n.repaint||(n.$el.remove(),n=null)},y=(n,e,u)=>{Array.isArray(e)&&(e={children:e}),(typeof e=="string"||typeof e=="number")&&(e={innerText:e.toString()}),e.elem=e.elem||"span",!n||(f=n.elem!==e.elem)?(n&&f&&s(n),e.$el=document.createElement(e.elem),u.append(e.$el)):(n.repaint=!0,e.$el=n.$el,e.cleanup=n.cleanup);let{$el:a,elem:E,children:g,cleanup:h,...r}=e;if(h)for(let t in h)a.removeEventListener(t.substring(2),e.cleanup[t]);e.cleanup={};for(let t in r)typeof(f=r[t])>"u"||(t.indexOf("on")!=0?a[t]=f:a.addEventListener(t.substring(2),e.cleanup[t]=d=>{r[t](d),m()}));return g?{...e,children:g.map((t,d)=>y(n&&n.children&&n.children[d],t,a))}:e};return m(),m},k={init:x,h:b,Fragment:p};export{k as default};
